var Flipper = (function () { function a(d, b, c) { this.isFlipping = false; this.duration = 600; this.flipNode = d; this.frontNode = d.querySelector(".front"); this.backNode = d.querySelector(".back"); this.setFrontTime(b); this.setBackTime(c) } a.prototype.setFrontTime = function (b) { this.frontNode.dataset.number = b }; a.prototype.setBackTime = function (b) { this.backNode.dataset.number = b }; a.prototype.flipDown = function (c, d) { var b = this; if (this.isFlipping) { return false } this.isFlipping = true; this.setFrontTime(c); this.setBackTime(d); this.flipNode.classList.add("running"); setTimeout(function () { b.flipNode.classList.remove("running"); b.isFlipping = false; b.setFrontTime(d) }, this.duration) }; return a }()); var getTimeFromDate = function (a) { return a.toTimeString().slice(0, 8).split(":").join("") }; var flips = document.querySelectorAll(".flip"); var now = new Date(); var nowTimeStr = getTimeFromDate(new Date(now.getTime() - 1000)); var nextTimeStr = getTimeFromDate(now); var flippers = Array.from(flips).map(function (a, b) { return new Flipper(a, nowTimeStr[b], nextTimeStr[b]) }); setInterval(function () { var c = new Date(); var d = getTimeFromDate(new Date(c.getTime() - 1000)); var b = getTimeFromDate(c); for (var a = 0; a < flippers.length; a++) { if (d[a] === b[a]) { continue } flippers[a].flipDown(d[a], b[a]) } }, 1000);